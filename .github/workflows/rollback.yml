name: ðŸ”„ Rollback to Last Stable Version

on:
  push:
    branches: [ 'master' ]

jobs:
  rollback:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ” Step 1:Get Latest Version from Nexus
        id: check_env
        run: |
          current_ver=$( curl -s -u "${{ secrets.NEXUS_USERNAME }}:${{ secrets.NEXUS_PASSWORD }}" \
          "http://65.2.35.91:8081/service/rest/v1/search?repository=maven-releases&group=com.helloworld.app&name=World-war&sort=version&direction=desc" \
          | jq -r '.items[0].version' )

          echo "The latest version is: $LATEST_VERSION"
          echo "current_version=$current_ver" >>$GITHUB_STEP_SUMMARY
